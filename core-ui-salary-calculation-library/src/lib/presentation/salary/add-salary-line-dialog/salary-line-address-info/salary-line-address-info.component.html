<div class="px-20" [formGroup]="addSalaryLineForm">

  <div class="mb-3 d-flex flex-column">

      <label class="form-label">Vehicle Type <span class="text-danger">*</span></label>

      <p-select
        [dataKey]="'id'"
        [filter]="true"
        formControlName="vehicleType"
        [options]="vehicleTypes"
        optionLabel="name"
        placeholder="Select Vehicle Type"
        [loading]="isLoadingVehicleTypes"
        appendTo="body"
        id="vehicle-type-select">
      </p-select>

      <div class="invalid-feedback d-block" *ngIf="addSalaryLineForm.controls['vehicleType'].touched && addSalaryLineForm.controls['vehicleType'].hasError('required')">
        <span>Vehicle type is required</span>
      </div>

  </div>

  <div class="d-flex mt-3 gap-2">

    <div class="flex-1 mb-3">

      <label class="form-label">Start Address <span class="text-danger">*</span></label>

      <p-autoComplete
        formControlName="startLocation"
        [suggestions]="startLocationOptions"
        field="tekst"
        (completeMethod)="onSearchAddress($event, true)"
        (onSelect)="onSelectAddress($event, true)"
        placeholder="Enter start location"
        [forceSelection]="false"
        [minLength]="2"
        appendTo="body"
        id="start-location-autocomplete">
      </p-autoComplete>

      <div class="invalid-feedback d-block" *ngIf="addSalaryLineForm.controls['startLocation'].touched && addSalaryLineForm.controls['startLocation'].hasError('required')">
        <span>Start location is required</span>
      </div>

    </div>

    <div class="flex-1 mb-3">

      <label class="form-label">End Address <span class="text-danger">*</span></label>

      <p-autoComplete
        formControlName="endLocation"
        [suggestions]="endLocationOptions"
        field="tekst"
        (completeMethod)="onSearchAddress($event, false)"
        (onSelect)="onSelectAddress($event, false)"
        placeholder="Enter end location"
        [forceSelection]="true"
        [minLength]="2"
        appendTo="body"
        id="end-location-autocomplete">
      </p-autoComplete>

      <div class="invalid-feedback d-block" *ngIf="addSalaryLineForm.controls['endLocation'].touched && addSalaryLineForm.controls['endLocation'].hasError('required')">
        <span>End location is required</span>
      </div>

    </div>
  </div>
  <!-- [ngClass]="!hasAccess ? 'disabled pe-none' : ''" -->

  <div class="d-flex gap-2">

    <div class="flex-1 d-flex flex-column">

      <label class="form-label">KM <span class="text-danger">*</span></label>
      <input class="form-control" placeholder="Enter kilometers" id="salary-line-kilometers" formControlName="kilometers" readonly />

      <div class="invalid-feedback d-block" *ngIf="addSalaryLineForm.controls['kilometers'].touched && addSalaryLineForm.controls['kilometers'].hasError('required')">
        <span>Kilometers is required</span>
      </div>

    </div>

    <div class="flex-1">

      <label class="form-label">Time <span class="text-danger">*</span></label>
      <input class="form-control" id="salary-line-time" placeholder="Enter total time" formControlName="totalTime" readonly />

      <div class="invalid-feedback d-block" *ngIf="addSalaryLineForm.controls['totalTime'].touched && addSalaryLineForm.controls['totalTime'].hasError('required')">
        <span>Total time is required</span>
      </div>

    </div>

  </div>

  <div class="flex-1">
          <div class="invalid-feedback">
        <span>{{ routeCalculationError }}</span>
      </div>
  </div>

  <div class="text-end">

    <button
      class="btn btn-outline-secondary btn-sm mt-2"
      (click)="calculateRoute()"
      [disabled]="isCalculateRouteDisabled()">
      Calculate
    </button>

  </div>

</div>
