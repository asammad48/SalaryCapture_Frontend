<div class="card d-flex flex-column vh-140 bg-transparent border-0">
  <progress-loading loaderKey="Settings_DeadlineTab"></progress-loading>

    <div class="vh-140 overflow-auto">
        <div class="mb-3">
            <p-accordion (onOpen)="getDeadlinesData($event.index)" (onClose)="onAccordionClose($event.index)"
                [activeIndex]="selectedDeadline" expandIcon="fa fa-chevron-right fs-16 color-gray-800"
                collapseIcon="fa fa-chevron-down fs-16 color-gray-800" [value]="0" #panelRef id="deadline-accordion">

                <p-accordion-panel class="mb-3" tabStyleClass="mb-3" *ngFor="let item of deadlinesList; let i = index"
                    [value]="i" id="deadline-accordion-{{i}}">
                    <p-accordion-header
                        class="d-flex justify-content-end align-items-center rounded-px-4 flex-row-reverse w-100 gap-3"
                        [ngClass]="{'rounded-bottom-end-0 rounded-bottom-start-0': this.selectedDeadline == i}" id="deadline-accordion-header-{{i}}">
                        <div class="d-flex justify-content-between align-items-center w-100">
                            <div>
                                <h6 class="fs-16 fw-semibold text-black m-0">{{ item.fileName }}</h6>
                                <span class="color-gray-600 fs-14 fw-normal">Uploaded at {{formateDateTime(item.uploadedAt)}} by {{item.uploadedBy}}</span>
                            </div>
                            <div class="d-flex">
                                <button type="button" class="btn btn-icon-only btn-text-danger rounded-pill bg-danger-100"  title="Delete Deadline" (click)="this.deleteDeadlineModal(item, $event)"
                                id="delete-deadline-{{item.id}}-btn">
                                <i class="fas fa-trash-alt m-0"></i></button>
                                <!-- <p-menu #menuRef [model]="getDeadlineMenus(item)" [popup]="true" appendTo="body">
                                    <ng-template let-item pTemplate="item">
                                        <a [id]="i" class="p-menuitem-link p-ripple d-block lh-1-4 {{ item.styleClass }}">
                                            <span class="p-menuitem-text fs-14">{{ item.label }}</span>
                                        </a>
                                    </ng-template>
                                </p-menu>

                                <div (click)="openMenu($event, menuRef)" class="p-2 cursor-pointer" [id]="i">
                                    <i class="fa fa-ellipsis-v m-0 color-gray-900 fs-18"></i>
                                </div> -->
                            </div>
                        </div>
                    </p-accordion-header>
                    <p-accordion-content class="accordion-content-p-0 accordion-content-bg-transparent">
                        <p-table [value]="deadlinesAgainstId" [paginator]="false"
                            styleClass="thead-sticky rounded-bottom-end-8 rounded-bottom-start-8 datatable-container-bottom-radius-4"
                            tableStyleClass="table table-border-transparent deadline-table" scrollHeight="300px" [scrollable]="true">
                            <ng-template #header>
                                <tr>
                                    <th>Region</th>
                                    <th class="ps-px-20">Area</th>
                                    <th>Country</th>
                                    <!-- <th (click)="sortData('status',item)">Status</th> -->
                                    <th>Starts From</th>
                                    <th>Ends At</th>
                                    <th>Deadline Date</th>
                                    <th>Deadline Time</th>
                                    <th>Duration</th>
                                </tr>
                            </ng-template>
                            <ng-template #body let-deadline>
                                <tr>
                                  <td>{{deadline.area}}</td>
                                  <td class="ps-px-20">{{deadline.subArea}}</td>
                                  <td>{{deadline.country}}</td>
                                    <!-- <td>
                                    <ng-container *ngIf="deadline.status == 0">
                                        <p-tag styleClass="fs-11 bg-danger min-w-5" value="Expired"></p-tag>
                                    </ng-container>
                                    <ng-container *ngIf="deadline.status == 1">
                                        <p-tag styleClass="fs-11 bg-success min-w-5" value="Active"></p-tag>
                                    </ng-container>
                                </td> -->
                                    <td>{{formateDateOnly(deadline.startsFrom)}}</td>
                                    <td>{{formateDateOnly(deadline.endsAt)}}</td>
                                    <td>{{formateDateOnly(deadline.deadlineDate)}}</td>
                                    <td>{{formatTimeHHMM(deadline.deadlineTime)}}</td>
                                    <td>{{deadline.duration}}</td>
                                </tr>
                            </ng-template>
                        </p-table>

                    </p-accordion-content>
                </p-accordion-panel>

            </p-accordion>
        </div>
    </div>

    <div *ngIf="!deadlinesList" class="empty-state grid ng-star-inserted">
        <div class="illustration">
            <svg class="height-12 width-12">
                <use xlink:href="#empty-state"></use>
            </svg>
        </div>
        <p class="bg-white fs-18 p-0">No Record Found</p>
    </div>
</div>
